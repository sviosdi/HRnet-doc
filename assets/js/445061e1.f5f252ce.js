"use strict";(self.webpackChunkp_14_doc=self.webpackChunkp_14_doc||[]).push([[687],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=d(n),m=r,f=p["".concat(s,".").concat(m)]||p[m]||c[m]||l;return n?a.createElement(f,o(o({ref:t},u),{},{components:n})):a.createElement(f,o({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:r,o[1]=i;for(var d=2;d<l;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},957:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:2},o="Le Code",i={unversionedId:"datatable-doc/code",id:"datatable-doc/code",title:"Le Code",description:"Le code du composant DataTable",source:"@site/docs/datatable-doc/code.md",sourceDirName:"datatable-doc",slug:"/datatable-doc/code",permalink:"/P14-doc/docs/datatable-doc/code",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Utilisation",permalink:"/P14-doc/docs/datatable-doc/utilisation"}},s={},d=[{value:"Le code du composant <code>DataTable</code>",id:"le-code-du-composant-datatable",level:2},{value:"Le mod\xe8le",id:"le-mod\xe8le",level:3},{value:"Le state",id:"le-state",level:3},{value:"Quelles donn\xe9es prendre en compte ?",id:"quelles-donn\xe9es-prendre-en-compte-",level:3},{value:"Les autres variables <code>state</code> ?",id:"les-autres-variables-state-",level:3},{value:"L&#39;affichage",id:"laffichage",level:3}],u={toc:d},p="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"le-code"},"Le Code"),(0,r.kt)("h2",{id:"le-code-du-composant-datatable"},"Le code du composant ",(0,r.kt)("inlineCode",{parentName:"h2"},"DataTable")),(0,r.kt)("h3",{id:"le-mod\xe8le"},"Le mod\xe8le"),(0,r.kt)("p",null,"La seule propri\xe9t\xe9 \xe0 passer au composant est le mod\xe8le ",(0,r.kt)("inlineCode",{parentName:"p"},"model")," (voir sa description dans la partie ",(0,r.kt)("a",{parentName:"p",href:"./utilisation"},"Utilisation"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<DataTable model="{dataModel}" />\n')),(0,r.kt)("p",null,"Le champ ",(0,r.kt)("inlineCode",{parentName:"p"},"headers")," du mod\xe8le sert \xe0 la fois \xe0 d\xe9finir les ent\xeates de chaque colonne de la table et le type d'",(0,r.kt)("em",{parentName:"p"},"inputs")," \xe0 utiliser dans\nla modale d'\xe9dition/ajout d'une nouvelle entr\xe9e. Cependant plusieurs ent\xeates de colonne peuvent \xeatre regroup\xe9es dans un header de type ",(0,r.kt)("inlineCode",{parentName:"p"},"fieldset"),". Or le mod\xe8le \xe0 utiliser dans le code doit \xeatre un tableau des ent\xeates contig\xfces telles qu'elles apparaissent dans la table : il faut donc mettre le mod\xe8le pass\xe9 en propri\xe9t\xe9 '\xe0 plat' de fa\xe7on \xe0 ce que les ent\xeates d'un fieldset soit int\xe9gr\xe9es de fa\xe7on contig\xfce. Cette op\xe9ration sera prise en charge dans le hook ",(0,r.kt)("inlineCode",{parentName:"p"},"useEffect()")," ex\xe9cut\xe9 uniquement lorsque le composant est mont\xe9. Ce mod\xe8le ",(0,r.kt)("inlineCode",{parentName:"p"},"flatModel")," mis \xe0 plat sera pass\xe9 en ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," de mani\xe8re \xe0 ce que sa valeur persiste lors des nouveaux rendus du composant."),(0,r.kt)("h3",{id:"le-state"},"Le state"),(0,r.kt)("p",null,"Toutes les valeurs consid\xe9r\xe9es comme du state seront d\xe9finies par le hook useState()."),(0,r.kt)("h3",{id:"quelles-donn\xe9es-prendre-en-compte-"},"Quelles donn\xe9es prendre en compte ?"),(0,r.kt)("p",null,"On distinguera 3 types de donn\xe9es :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," re\xe7ues par le mod\xe8le ou mises \xe0 jour par une \xe9dition/ajout d'une nouvelle ligne."),(0,r.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,r.kt)("inlineCode",{parentName:"li"},"dataToUse")," qui sont les donn\xe9es utilis\xe9es par l'affichage. Selon la situation, elles peuvent correspondre\n\xe0 une copie de ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," ou \xeatre le r\xe9sultat d'une recherche (sous-ensemble de ",(0,r.kt)("inlineCode",{parentName:"li"},"data"),") ou encore les ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," tri\xe9es."),(0,r.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,r.kt)("inlineCode",{parentName:"li"},"currentData"),", sous-ensemble de ",(0,r.kt)("inlineCode",{parentName:"li"},"dataToUse")," ( ",(0,r.kt)("inlineCode",{parentName:"li"},"dataToUse")," filtr\xe9es) qui correspondent aux seules entr\xe9es visibles sur la page.")),(0,r.kt)("h3",{id:"les-autres-variables-state-"},"Les autres variables ",(0,r.kt)("inlineCode",{parentName:"h3"},"state")," ?"),(0,r.kt)("p",null,"Il est clair que la ",(0,r.kt)("inlineCode",{parentName:"p"},"DataTable")," devra \xeatre mise \xe0 jour lorsque l'une valeurs suivantes subira une modification :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,r.kt)("inlineCode",{parentName:"li"},"dataToUse")," re\xe7ues par le mod\xe8le ou mises \xe0 jour par une \xe9dition/ajout d'une nouvelle ligne."),(0,r.kt)("li",{parentName:"ul"},"Le num\xe9ro (",(0,r.kt)("em",{parentName:"li"},"index")," \xe0 partir de 0) ",(0,r.kt)("inlineCode",{parentName:"li"},"sortBy")," de la colonne sur laquelle se fait un tri. (",(0,r.kt)("inlineCode",{parentName:"li"},"null")," si aucun tri)"),(0,r.kt)("li",{parentName:"ul"},"Le type de tri ",(0,r.kt)("inlineCode",{parentName:"li"},"descending")," ayant pour valeur ",(0,r.kt)("em",{parentName:"li"},"false")," pour un tri croissant et ",(0,r.kt)("em",{parentName:"li"},"true")," pour un tri d\xe9croissant."),(0,r.kt)("li",{parentName:"ul"},"Le nombre ",(0,r.kt)("inlineCode",{parentName:"li"},"itemsPerPage")," d'entr\xe9es par page. Ce nombre pouvant \xe9ventuellement \xeatre modifi\xe9 par le ",(0,r.kt)("inlineCode",{parentName:"li"},"Select")," de la table."),(0,r.kt)("li",{parentName:"ul"},"La page ",(0,r.kt)("inlineCode",{parentName:"li"},"page")," actuellement affich\xe9e contenant un nombre ",(0,r.kt)("inlineCode",{parentName:"li"},"itemsPerPage")," d'entr\xe9es.")),(0,r.kt)("h3",{id:"laffichage"},"L'affichage"),(0,r.kt)("p",null,"L'affichage a besoin de conna\xeetre les donn\xe9es ",(0,r.kt)("inlineCode",{parentName:"p"},"currentData")," qui sont les entr\xe9es de la page \xe0 afficher. Ces donn\xe9es sont mises \xe0 jour dans un hook ",(0,r.kt)("inlineCode",{parentName:"p"},"useEffect()")," ayant dans son tableau de d\xe9pendances les 5 states mentionn\xe9s ci-dessus."))}c.isMDXComponent=!0}}]);