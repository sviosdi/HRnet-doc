"use strict";(self.webpackChunkp_14_doc=self.webpackChunkp_14_doc||[]).push([[493],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>f});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),s=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},u=function(e){var n=s(e.components);return o.createElement(l.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=s(t),m=r,f=c["".concat(l,".").concat(m)]||c[m]||d[m]||a;return t?o.createElement(f,p(p({ref:n},u),{},{components:t})):o.createElement(f,p({ref:n},u))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,p=new Array(a);p[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[c]="string"==typeof e?e:r,p[1]=i;for(var s=2;s<a;s++)p[s]=t[s];return o.createElement.apply(null,p)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4171:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>p,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>s});var o=t(7462),r=(t(7294),t(3905));const a={sidebar_position:1},p="Popup",i={unversionedId:"sl-base/Popup",id:"sl-base/Popup",title:"Popup",description:"Le code du composant Popup",source:"@site/docs/sl-base/Popup.md",sourceDirName:"sl-base",slug:"/sl-base/Popup",permalink:"/P14-doc/docs/sl-base/Popup",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Sl-React : les composants de base",permalink:"/P14-doc/docs/category/sl-react--les-composants-de-base"},next:{title:"Select",permalink:"/P14-doc/docs/sl-base/Select"}},l={},s=[{value:"Le code du composant <code>Popup</code>",id:"le-code-du-composant-popup",level:2},{value:"Utilisation de <code>forwardRef</code>",id:"utilisation-de-forwardref",level:3},{value:"Utilisation de <code>useImperativeHandle</code>",id:"utilisation-de-useimperativehandle",level:3},{value:"Le composant <code>Popup</code>",id:"le-composant-popup",level:3},{value:"Utilisation obligatoire de <code>useRef</code>",id:"utilisation-obligatoire-de-useref",level:4},{value:"Les propri\xe9t\xe9s <code>className</code> et <code>stateChanged</code>",id:"les-propri\xe9t\xe9s-classname-et-statechanged",level:4}],u={toc:s},c="wrapper";function d(e){let{components:n,...t}=e;return(0,r.kt)(c,(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"popup"},"Popup"),(0,r.kt)("h2",{id:"le-code-du-composant-popup"},"Le code du composant ",(0,r.kt)("inlineCode",{parentName:"h2"},"Popup")),(0,r.kt)("h3",{id:"utilisation-de-forwardref"},"Utilisation de ",(0,r.kt)("inlineCode",{parentName:"h3"},"forwardRef")),(0,r.kt)("p",null,"Le composant Popup utilise la fonction ",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," de React qui permet de faire passer une r\xe9f\xe9rence d'un composant parent \xe0 un composant enfant. Ceci est particuli\xe8rement utile pour acc\xe9der directement \xe0 l'\xe9l\xe9ment DOM sous-jacent ou \xe0 l'instance du composant enfant. Dans React, l'objet ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," est utilis\xe9 pour acc\xe9der directement \xe0 l'\xe9l\xe9ment DOM sous-jacent ou \xe0 l'instance du composant, mais normalement uniquement dans le m\xeame composant o\xf9 elles sont d\xe9finies, ce qui signifie qu'on ne peut passer directement une r\xe9f\xe9rence d'un composant parent \xe0 un composant enfant. C'est l\xe0 que ",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," entre en jeu."),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," est utilis\xe9e pour cr\xe9er un composant d'ordre sup\xe9rieur (HOC) qui encapsule le composant enfant et transmet la r\xe9f\xe9rence du parent au composant enfant encapsul\xe9. Voici un exemple d'utilisation de ",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef\xa0"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import { useRef, useEffect, forwardRef } from \"react\";\n\nconst ChildComponent = forwardRef((props, ref) => {\n  useEffect(() => {\n    console.log(ref.current); // <div>modifi\xe9 par acc\xe8s direct...</div>\n  }, [ref]);\n\n  // La r\xe9f\xe9rence \xe0 l'instance DOM de l'\xe9l\xe9ment input est affect\xe9e \xe0 la variable ref (param\xe8tre de forwardRef)\n  // et donc r\xe9cup\xe9rable dans le composant parent par `useRef`\n  return <div ref={ref}>Testing...</div>;\n});\n\nconst ParentComponent = () => {\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    console.log(inputRef.current); // acc\xe8s direct dans le ParentComponent \xe0 l'instance DOM du div du ChildComponent\n    inputRef.current.innerText = \"Contenu du div modifi\xe9 par acc\xe8s direct...\"; // Testing... => Contenu du div modifi\xe9 par acc\xe8s direct...\n  }, []);\n\n  // La variable inputRef est pass\xe9e au composant enfant par la 'propri\xe9t\xe9-param\xe8tre' ref et prendra la valeur de l'instance DOM de l'\xe9l\xe9ment\n  // input du ChildComponent\n  return <ChildComponent ref={inputRef} />;\n};\n\nexport { ChildComponent, ParentComponent };\n")),(0,r.kt)("h3",{id:"utilisation-de-useimperativehandle"},"Utilisation de ",(0,r.kt)("inlineCode",{parentName:"h3"},"useImperativeHandle")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'import { useRef, useEffect, forwardRef, useImperativeHandle } from "react";\n\nconst ChildComponent = forwardRef((props, ref) => {\n  useImperativeHandle(ref, () => ({\n    // l\'objet retourn\xe9 contient les m\xe9thodes qui doivent \xeatre accessibles dans le ParentComponent\n    childMethode,\n  }));\n\n  useEffect(() => {\n    console.log(ref.current); // {childMethode:  () => { console.log("child methode running...");} }\n  }, [ref]);\n\n  const childMethode = () => {\n    console.log("child methode running...");\n  };\n\n  return <div>Testing... Je suis le composant Child</div>;\n});\n\nconst ParentComponent = () => {\n  const childRef = useRef(null);\n\n  useEffect(() => {\n    childRef.current.childMethode(); // child methode running...\n  }, []);\n\n  return <ChildComponent ref={childRef} />;\n};\n\nexport { ChildComponent, ParentComponent };\n')),(0,r.kt)("h3",{id:"le-composant-popup"},"Le composant ",(0,r.kt)("inlineCode",{parentName:"h3"},"Popup")),(0,r.kt)("p",null,"Ce composant sert de composant de base pour tout composant d\xe9riv\xe9 (composant parent de ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup"),") devant faire appara\xeetre une fen\xeatre popup : pour les menus, les popups contextuels, les selects..."),(0,r.kt)("p",null,"Un seul ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," ne peut \xeatre ouvert \xe0 la fois : l'ouverture d'un ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," entra\xeene la fermeture automatique d'un autre ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," ouvert."),(0,r.kt)("h4",{id:"utilisation-obligatoire-de-useref"},"Utilisation obligatoire de ",(0,r.kt)("inlineCode",{parentName:"h4"},"useRef")),(0,r.kt)("p",null,"Le ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," doit explicitement avoir une r\xe9f\xe9rence objet ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," obtenue par ",(0,r.kt)("inlineCode",{parentName:"p"},"useRef"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const popupRef = useRef(null)\n...\n<Popup ref={popupRef}> ... </Popup>\n")),(0,r.kt)("p",null,"Le Popup expose les trois m\xe9thodes suivantes accessible par ",(0,r.kt)("inlineCode",{parentName:"p"},"popupRef.current.methode"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"toggle(ev)")," : appel\xe9e g\xe9n\xe9ralement en r\xe9ponse \xe0 un clic sur un menu. Ouvre le popup courant s'il est ferm\xe9 apr\xe8s avoir ferm\xe9 le popup d\xe9j\xe0 ouvert s'il existe. Ferme le popup courant s'il est ouvert."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"isOpen()"),": retourne ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," si le popup courant est ouvert, sinon retourne ",(0,r.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"close()")," : ferme le popup courant.")),(0,r.kt)("h4",{id:"les-propri\xe9t\xe9s-classname-et-statechanged"},"Les propri\xe9t\xe9s ",(0,r.kt)("inlineCode",{parentName:"h4"},"className")," et ",(0,r.kt)("inlineCode",{parentName:"h4"},"stateChanged")),(0,r.kt)("p",null,"Tous les childs d'un ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," seront englob\xe9s dans un ",(0,r.kt)("inlineCode",{parentName:"p"},"div")," ayant pour classe ",(0,r.kt)("em",{parentName:"p"},"sl-popup-00"),". La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"className")," permet cependant d'ajouter une classe personnalis\xe9e si n\xe9cessaire.\nLa propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"stateChanged")," (facultative) r\xe9f\xe9rence une fonction qui sera appel\xe9e \xe0 chaque changement d'\xe9tat (ouvert ou ferm\xe9) du ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," avec pour param\xe8tre la valeur ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," si le ",(0,r.kt)("inlineCode",{parentName:"p"},"Popup")," vient d'\xeatre ouvert et ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," s'il vient d'\xeatre ferm\xe9'."))}d.isMDXComponent=!0}}]);