"use strict";(self.webpackChunkHRnet_doc=self.webpackChunkHRnet_doc||[]).push([[687],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>f});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=d(a),m=l,f=u["".concat(s,".").concat(m)]||u[m]||c[m]||r;return a?n.createElement(f,i(i({ref:t},p),{},{components:a})):n.createElement(f,i({ref:t},p))}));function f(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:l,i[1]=o;for(var d=2;d<r;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},957:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=a(7462),l=(a(7294),a(3905));const r={sidebar_position:2},i="Le code du composant DataTable",o={unversionedId:"datatable-doc/code",id:"datatable-doc/code",title:"Le code du composant DataTable",description:"Les propri\xe9t\xe9s.",source:"@site/docs/datatable-doc/code.md",sourceDirName:"datatable-doc",slug:"/datatable-doc/code",permalink:"/HRnet-doc/docs/datatable-doc/code",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Utilisation",permalink:"/HRnet-doc/docs/datatable-doc/utilisation"}},s={},d=[{value:"Les propri\xe9t\xe9s.",id:"les-propri\xe9t\xe9s",level:2},{value:"Le mod\xe8le",id:"le-mod\xe8le",level:2},{value:"Le state",id:"le-state",level:2},{value:"Quelles donn\xe9es prendre en compte ?",id:"quelles-donn\xe9es-prendre-en-compte-",level:3},{value:"L&#39;affichage",id:"laffichage",level:3},{value:"La recherche",id:"la-recherche",level:3},{value:"Gestion du state dans <code>useEffect()</code>",id:"gestion-du-state-dans-useeffect",level:2}],p={toc:d},u="wrapper";function c(e){let{components:t,...a}=e;return(0,l.kt)(u,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"le-code-du-composant-datatable"},"Le code du composant ",(0,l.kt)("inlineCode",{parentName:"h1"},"DataTable")),(0,l.kt)("h2",{id:"les-propri\xe9t\xe9s"},"Les propri\xe9t\xe9s."),(0,l.kt)("p",null,"Pour rappel, les trois propri\xe9t\xe9s du composant Datatable sont :"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"model")," ","[obligatoire]"," le mod\xe8le comme d\xe9crit pr\xe9c\xe9demment."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"data")," [facultatif- ",(0,l.kt)("inlineCode",{parentName:"li"},"[]")," par d\xe9faut] : les donn\xe9es initiales \xe0 afficher sous forme d'un array d'objets repr\xe9sentant chaque entr\xe9e de la Datatable et dont chaque champ correspond au champ ",(0,l.kt)("inlineCode",{parentName:"li"},"field")," des ",(0,l.kt)("inlineCode",{parentName:"li"},"headers")," du mod\xe8le."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"externalForm")," ","[facultatif - ",(0,l.kt)("inlineCode",{parentName:"li"},"false")," par d\xe9faut]",". Si cette propri\xe9t\xe9 est pr\xe9sente, alors la Datatable peut g\xe9rer l'\xe9dition d'une nouvelle entr\xe9e par un formulaire qui n'est pas g\xe9n\xe9r\xe9 automatiquement par la Datatable. (Ce qui est d\xe9conseill\xe9.) Si cette propri\xe9t\xe9 n'est pas pr\xe9sente, c'est donc la Datatable qui peut alors g\xe9n\xe9rer automatiquement le formulaire d'\xe9dition d'une nouvelle entr\xe9e.")),(0,l.kt)("h2",{id:"le-mod\xe8le"},"Le mod\xe8le"),(0,l.kt)("p",null,"Voir la description de la propri\xe9t\xe9 ",(0,l.kt)("inlineCode",{parentName:"p"},"model")," repr\xe9sentant le mod\xe8le de la table dans la partie ",(0,l.kt)("a",{parentName:"p",href:"./utilisation"},"Utilisation")," :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<DataTable model="{dataModel}" data="{[]}" />\n')),(0,l.kt)("p",null,"Le champ ",(0,l.kt)("inlineCode",{parentName:"p"},"headers")," du mod\xe8le sert \xe0 la fois \xe0 d\xe9finir les ent\xeates de chaque colonne de la table et le type d'",(0,l.kt)("em",{parentName:"p"},"inputs")," \xe0 utiliser dans\nla modale d'\xe9dition/ajout d'une nouvelle entr\xe9e. Cependant plusieurs ent\xeates de colonne peuvent \xeatre regroup\xe9es dans un header de type ",(0,l.kt)("inlineCode",{parentName:"p"},"fieldset"),". Or le mod\xe8le \xe0 utiliser dans le code doit \xeatre un tableau des ent\xeates contig\xfces telles qu'elles apparaissent dans la table : il faut donc mettre le mod\xe8le pass\xe9 en propri\xe9t\xe9 '\xe0 plat' de fa\xe7on \xe0 ce que les ent\xeates d'un fieldset soit int\xe9gr\xe9es de fa\xe7on contig\xfce dans un nouveau champ du mod\xe8le nomm\xe9 ",(0,l.kt)("inlineCode",{parentName:"p"},"flatHeaders"),". Pour obtenir un mod\xe8le mis \xe0 jour avec ce nouveau champ on utilisera la fonction ",(0,l.kt)("inlineCode",{parentName:"p"},"getModel()")," d\xe9finie dans le fichier ",(0,l.kt)("inlineCode",{parentName:"p"},"Utils.js")),(0,l.kt)("p",null,"Le rendu de la Datatable ayant besoin de conna\xeetre le champ ",(0,l.kt)("inlineCode",{parentName:"p"},"flatHeaders")," et pour \xe9viter le calcul de la valeur de ce champ \xe0 chaque rendu, on passera \xe0 la Datatable en propri\xe9t\xe9 ",(0,l.kt)("inlineCode",{parentName:"p"},"model")," le mod\xe8le d\xe9j\xe0 mis \xe0 jour par la fonction getModel()"),(0,l.kt)("h2",{id:"le-state"},"Le state"),(0,l.kt)("p",null,"Toutes les valeurs consid\xe9r\xe9es comme du state seront d\xe9finies par le hook useState()."),(0,l.kt)("h3",{id:"quelles-donn\xe9es-prendre-en-compte-"},"Quelles donn\xe9es prendre en compte ?"),(0,l.kt)("p",null,"On distinguera 3 types de donn\xe9es :"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," pass\xe9es par la propri\xe9t\xe9 ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," (renomm\xe9e ",(0,l.kt)("inlineCode",{parentName:"li"},"initial_data"),") : elles repr\xe9sentent \xe0 chaque instant ",(0,l.kt)("em",{parentName:"li"},"la totalit\xe9")," des donn\xe9es connues et g\xe9r\xe9es par la table.",(0,l.kt)("br",null),"En cas d'\xe9dition d'une nouvelle entr\xe9e, ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," sera mis \xe0 jour par le state ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," de la Datatable elle-m\xeame si celle-ci g\xe8re elle m\xeame le formulaire d'\xe9dition d'une nouvelle entr\xe9e. Sinon, c'est l'application qui g\xe8re le formulaire qui devra g\xe9rer (mettre \xe0 jour) le state pass\xe9 en propri\xe9t\xe9 \xe0 la table. (C'est le cas de l'application HRnet)"),(0,l.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,l.kt)("inlineCode",{parentName:"li"},"dataToUse")," qui sont les donn\xe9es utilis\xe9es par l'affichage. Selon la situation, elles peuvent correspondre\n\xe0 une copie de ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," ou \xeatre le r\xe9sultat d'une recherche (sous-ensemble de ",(0,l.kt)("inlineCode",{parentName:"li"},"data"),") ou encore les ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," tri\xe9es."),(0,l.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,l.kt)("inlineCode",{parentName:"li"},"currentData"),", sous-ensemble de ",(0,l.kt)("inlineCode",{parentName:"li"},"dataToUse")," (",(0,l.kt)("inlineCode",{parentName:"li"},"dataToUse")," filtr\xe9es) qui correspondent aux seules entr\xe9es visibles sur la page courante.")),(0,l.kt)("p",null,"Il est clair que la ",(0,l.kt)("inlineCode",{parentName:"p"},"DataTable")," devra \xeatre mise \xe0 jour (subir un nouveau rendu) lorsque l'une des valeurs suivantes d\xe9finies commet ",(0,l.kt)("inlineCode",{parentName:"p"},"state")," subira une modification :"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Les donn\xe9es ",(0,l.kt)("inlineCode",{parentName:"li"},"dataToUse")," re\xe7ues par le mod\xe8le ou mises \xe0 jour par une \xe9dition/ajout d'une nouvelle ligne."),(0,l.kt)("li",{parentName:"ul"},"Le num\xe9ro (",(0,l.kt)("em",{parentName:"li"},"index")," \xe0 partir de 0) ",(0,l.kt)("inlineCode",{parentName:"li"},"sortBy")," de la colonne sur laquelle se fait un tri. (",(0,l.kt)("inlineCode",{parentName:"li"},"null")," si aucun tri)"),(0,l.kt)("li",{parentName:"ul"},"Le type de tri ",(0,l.kt)("inlineCode",{parentName:"li"},"descending")," ayant pour valeur ",(0,l.kt)("em",{parentName:"li"},"false")," pour un tri croissant et ",(0,l.kt)("em",{parentName:"li"},"true")," pour un tri d\xe9croissant."),(0,l.kt)("li",{parentName:"ul"},"Le nombre ",(0,l.kt)("inlineCode",{parentName:"li"},"itemsPerPage")," d'entr\xe9es par page. Ce nombre pouvant \xe9ventuellement \xeatre modifi\xe9 par le ",(0,l.kt)("inlineCode",{parentName:"li"},"Select")," de la table."),(0,l.kt)("li",{parentName:"ul"},"La page ",(0,l.kt)("inlineCode",{parentName:"li"},"page")," actuellement affich\xe9e contenant un nombre ",(0,l.kt)("inlineCode",{parentName:"li"},"itemsPerPage")," d'entr\xe9es.")),(0,l.kt)("h3",{id:"laffichage"},"L'affichage"),(0,l.kt)("p",null,"L'affichage a besoin de conna\xeetre les donn\xe9es ",(0,l.kt)("inlineCode",{parentName:"p"},"currentData")," qui sont les entr\xe9es de la page \xe0 afficher. Ces donn\xe9es sont mises \xe0 jour dans un hook ",(0,l.kt)("inlineCode",{parentName:"p"},"useEffect()")," ayant dans son tableau de d\xe9pendances les 5 states mentionn\xe9s ci-dessus."),(0,l.kt)("h3",{id:"la-recherche"},"La recherche"),(0,l.kt)("p",null,"Le state ",(0,l.kt)("inlineCode",{parentName:"p"},"searching")," est une valeur ",(0,l.kt)("em",{parentName:"p"},"boolean")," qui indique si le champ de recherche est actif. (Une recherche est en cours, le champ de recherche n'est pas vide)."),(0,l.kt)("h2",{id:"gestion-du-state-dans-useeffect"},"Gestion du state dans ",(0,l.kt)("inlineCode",{parentName:"h2"},"useEffect()")),(0,l.kt)("p",null,"Consulter les commentaires du code dans ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/sviosdi/HRnet-dev/blob/main/src/lib/Datatable/Datatable.jsx"},"Datatable.jsx")))}c.isMDXComponent=!0}}]);